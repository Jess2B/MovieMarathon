<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">
    <title>Sign Up</title>
    <style>
        :root {
            --main-color: #e6920a;
            --body-bg: #181616;
            --box-bg: #221f1f;
            --text-color: #ffffff;
            --nav-height: 60px;
            --space-top: 30px;
        }
    
        *{  
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif; /* Use Cairo for global font */
        }
    
        body {
            background: url("https://img.freepik.com/premium-photo/abstract-pui-95-background-wallpaper_792836-261571.jpg");
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            overflow: hidden;
            font-family: "Cairo", sans-serif;
            background-color: var(--body-bg);
            color: var(--text-color);
        }
    
        .wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 110vh;
            background: rgba(39, 39, 39, 0.4);
        }
    
        .nav {
            position: fixed;
            top: 0;
            display: flex;
            justify-content: space-around;
            width: 100%;
            height: 100px;
            line-height: 100px;
            background: linear-gradient(rgba(39,39,39, 0.6), transparent);
            z-index: 100;
        }
    
        /* Updated Logo Styling */
        .nav-logo {
            color: white;
            font-size: 36px; /* Bigger font size */
            font-weight: 700; /* Bold weight */
            display: flex;
            align-items: center;
        }
    
        .nav-logo i {
            font-size: 40px; /* Size the icon to match logo size */
            margin-right: 8px;
        }
    
        .main-color {
            color: var(--main-color);
        }
    .nav-menu ul{
        display: flex;
    }
    .nav-menu ul li{
        list-style-type: none;
    }
    .nav-menu ul li .link{
        text-decoration: none;
        font-weight: 500;
        color: #fff;
        padding-bottom: 15px;
        margin: 0 25px;
    }
    .link:hover, .active{
        border-bottom: 2px solid #fff;
    }
    .form-box{
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 520px;
        height: 520px;
        overflow: hidden;
        z-index: 2;
    }
    .register-container{
        position: absolute;
        left: 4px;
        width: 500px;
        display: flex;
        flex-direction: column;
        transition: .5s ease-in-out;
    }
    .top span{
        color: #fff;
        font-size: small;
        padding: 5px 0;
        display: flex;
        justify-content: center;
    }
    .top span a{
        font-weight: 500;
        color: #fff;
        margin-left: 5px;
    }
    header{
        color: #fff;
        font-size: 30px;
        text-align: center;
        padding: 10px 0 30px 0;
    }
    .two-forms{
        display: flex;
        gap: 3px;
    }
    .input-field{
        font-size: 15px;
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
        height: 45px;
        width: 100%;
        padding: 0 10px 0 45px;
        border-radius: 30px;
        outline: none;
        transition: .2s ease;
    }
    .input-field:hover, .input-field:focus{
        background: rgba(255, 255, 255, 0.25);
    }
    ::-webkit-input-placeholder{
        color: #fff;
    }
    .input-box i{
        position: relative;
        top: -35px;
        left: 17px;
        color: #fff;
    }
    .submit{
        font-size: 15px;
        font-weight: 500;
        color: black;
        height: 45px;
        width: 100%;
        border: none;
        border-radius: 30px;
        outline: none;
        background: rgba(255, 255, 255, 0.7);
        cursor: pointer;
        transition: .3s ease-in-out;
    }
    .submit:hover{
        background: rgba(255, 255, 255, 0.5);
        box-shadow: 1px 5px 7px 1px rgba(0, 0, 0, 0.2);
    }
    .input-box input:focus {
        outline: 0;
    }
    .input-box.error input {
        border-color: #ff3860; 
    }
    .input-box.success input {
        border-color: #09c372; 
    }
    .error {
        color: #ff3860;
        font-size: 12px;
        margin-bottom: 15px; /* space */
        padding-left: 15px; /* indent */
    }  
    
</style>
</head>

<body>
    <div class="wrapper">
        <nav class="nav">
            <div class="nav-logo">
                <i class='bx bx-movie-play bx-tada main-color'></i>
                <span>Fl<span class="main-color">i</span>x</span> <!-- Styling Flix -->
            </div>
        </nav>


<!----------------------------- Form box ----------------------------------->    
    <form action="/signup" method="POST" id="form"> 
    <div class="form-box">
       
    <!------------------- registration form -------------------------->
    <div class="register-container" id="register">
    <div class="top">
        <header>Sign Up</header>
    </div>
    <div class="two-forms">
        <div class="input-box">
            <input type="text" id="firstname" class="input-field" placeholder="Firstname">
            <i class="bx bx-user"></i>
            <span class="error"></span>
        </div>
        <div class="input-box">
            <input type="text" id="lastname" class="input-field" placeholder="Lastname">
            <i class="bx bx-user"></i>
            <span class="error"></span>
        </div>
    </div>
    <div class="input-box">
        <input type="text" id="email" class="input-field" placeholder="Email">
        <i class="bx bx-envelope"></i>
        <span class="error"></span>
    </div>
    <div class="input-box">
        <input type="password" id="password" class="input-field" placeholder="Password">
        <i class="bx bx-lock-alt"></i>
        <span class="error"></span>
        <span id="togglePassword" style="cursor: pointer; position: absolute; right: 14px; top: 57%; transform: translateY(-50%);">
            üëÅÔ∏è
        </span>
    </div>
    <div class="input-box">
        <input type="password" id="confirm_password" class="input-field" placeholder="Confirm Password">
        <i class="bx bx-lock-alt"></i>
        <span class="error"></span>
        <span id="toggleConfirmPassword" style="cursor: pointer; position: absolute; right: 14px; top: 73%; transform: translateY(-50%);">
            üëÅÔ∏è
        </span>
    </div>
    <div class="input-box">
        <input type="submit" class="submit" value="Register">
    </div>
    <div class="top">
        <span>Have an account? <a href ="login.html" onclick="login()">Login</a></span>
    </div>
    </div>
    </div>
</div>   

</form>
<script>
   
   function myMenuFunction() {
    var i = document.getElementById("navMenu");

    if(i.className === "nav-menu") {
        i.className += " responsive";
    } else {
        i.className = "nav-menu";
    }
   }
 
</script>

<script>

    var b = document.getElementById("registerBtn");
    var y = document.getElementById("register");


    function register() {
     
        y.style.right = "5px";
        b.className += " white-btn";
        y.style.opacity = 1;
    }


</script>

<script>
    const form = document.getElementById("form");
    const firstname = document.getElementById("firstname");
    const lastname = document.getElementById("lastname");
    const email = document.getElementById("email");
    const pass = document.getElementById("password");
    const confirmPass = document.getElementById("confirm_password");

    form.addEventListener("submit", e => {
        e.preventDefault();
        if (validateInputs()) {
            const firstnameVal = firstname.value.trim();
            const lastnameVal = lastname.value.trim();
            const emailVal = email.value.trim();
            const passVal = pass.value.trim();

            // Simulating the sending of an email confirmation (for demo purposes)
            fetch(form.action, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    firstName: firstnameVal,
                    lastName: lastnameVal,
                    email: emailVal,
                    password: passVal,
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Account created! Please check your email to confirm your registration.');
                    window.location.href = 'emailconfirm.html';  // Redirect to email confirmation page
                } else {
                    alert(data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again later.');
            });

            resetForm();
        }
    });

    const resetForm = () => {
        firstname.value = "";
        lastname.value = "";
        email.value = "";
        pass.value = "";
        confirmPass.value = "";

        const inputFields = [firstname, lastname, email, pass, confirmPass];
        inputFields.forEach(field => {
            field.parentElement.classList.remove("success");
            field.parentElement.classList.remove("error");
        });
    };

    const errors = (element, message) => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector(".error");

        errorDisplay.innerText = message;
        inputControl.classList.add("error");
        inputControl.classList.remove("success");
    };

    const success = element => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector(".error");

        errorDisplay.innerText = "";
        inputControl.classList.add("success");
        inputControl.classList.remove("error");
    };

    const isValidEmail = email => {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    };

    const validateInputs = () => {
        const emailVal = email.value.trim();
        const passVal = pass.value.trim();
        const confirmPassVal = confirmPass.value.trim();
        const firstnameVal = firstname.value.trim();
        const lastnameVal = lastname.value.trim();

        let isValid = true;

        if (firstnameVal === "") {
            errors(firstname, "Please input your first name");
            isValid = false;
        } else {
            success(firstname);
        }

        if (lastnameVal === "") {
            errors(lastname, "Please input your last name");
            isValid = false;
        } else {
            success(lastname);
        }

        if (emailVal === "") {
            errors(email, 'Email is required');
            isValid = false;
        } else if (!isValidEmail(emailVal)) {
            errors(email, 'Provide a valid email address');
            isValid = false;
        } else {
            success(email);
        }

        if (passVal === "") {
            errors(pass, "Password is required");
            isValid = false;
        } else if (passVal.length < 7) {
            errors(pass, "Password must be at least 7 characters");
            isValid = false;
        } else if (!/[A-Z]/.test(passVal)) {
            errors(pass, "Password MUST contain at least 1 uppercase letter");
            isValid = false;
        } else if (!/[a-z]/.test(passVal)) {
            errors(pass, "Password MUST contain at least 1 lowercase letter");
            isValid = false;
        } else if (!/[0-9]/.test(passVal)) {
            errors(pass, "Password MUST contain at least 1 number");
            isValid = false;
        } else if (!/[^\\/`~!@#$%^&*:;<>._-|?+=()"'"]/.test(passVal)) {
            errors(pass, "Password MUST contain at least 1 special character");
            isValid = false;
        } else {
            success(pass);
        }

        if (confirmPassVal === "") {
            errors(confirmPass, "Please confirm your password");
            isValid = false;
        } else if (confirmPassVal !== passVal) {
            errors(confirmPass, "Passwords do not match");
            isValid = false;
        } else {
            success(confirmPass);
        }

        return isValid;
    };

    // Password visibility toggle
    document.getElementById('togglePassword').addEventListener('click', function () {
        const passwordInput = document.getElementById('password');
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
    });

    // Confirm Password visibility toggle
    document.getElementById('toggleConfirmPassword').addEventListener('click', function () {
        const confirmPasswordInput = document.getElementById('confirm_password');
        const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        confirmPasswordInput.setAttribute('type', type);
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
    });
</script>
</body>

</html>